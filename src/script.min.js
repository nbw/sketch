!function l(n,i,o){function a(t,e){if(!i[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},n[t][0].call(r.exports,function(e){return a(n[t][1][e]||e)},r,r.exports,l,n,i,o)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var l=t[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.x=e,this.y=t,this._x=e,this._y=t,this.consumed=!0}var e,t,l;return e=r,(t=[{key:"setX",value:function(e){this.x=e}},{key:"setY",value:function(e){this.y=e}},{key:"add",value:function(e,t){this.x+=e,this.y+=t}},{key:"changed",value:function(){return this.x!=this._x||this.y!=this._y}},{key:"normalize",value:function(){this._x=this.x,this._y=this.y}}])&&n(e.prototype,t),l&&n(e,l),r}();r.default=l},{}],2:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var l=t[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=["#cc1b0c","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#29b6f6","#4dd0e1","#4db6ac","#21ffc4","#198552","#4caf50","#8bc34a","#d4e157","#ffeb3b","#ffb300","#fb8c00","#ff5722","#8d6e63","#9e9e9e","#607d8b","#000","#FFF"],l=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.keyboard=document.getElementById("keyboard"),this.keys=keyboard.querySelectorAll("[data-key]"),this.current="#333"}var e,r,l;return e=t,(r=[{key:"init",value:function(){for(var r=this,e=0;e<this.keys.length;e++)!function(e){var t=Number(r.keys[e].getAttribute("data-key"));r.keys[e].style.backgroundColor=i[t],r.keys[e].setAttribute("color",i[t]),r.keys[e].addEventListener("click",function(e){r.current=e.target.getAttribute("color"),r.setKeyActive(t)})}(e)}},{key:"setKeyActive",value:function(e){for(var t=0;t<this.keys.length;t++)Number(this.keys[t].getAttribute("data-key"))===e?this.keys[t].classList.add("active"):this.keys[t].classList.remove("active")}},{key:"pick",value:function(e){this.current=i[e%i.length],this.setKeyActive(e)}}])&&n(e.prototype,r),l&&n(e,l),t}();r.default=l},{}],3:[function(e,t,r){"use strict";var l=o(e("opzjs")),n=o(e("./midi")),i=o(e("./brush")),e=o(e("./color_picker"));function o(e){return e&&e.__esModule?e:{default:e}}var a=!1,u=document.getElementById("canvas"),s=document.createElement("canvas"),c=u.getContext("2d"),p=s.getContext("2d"),y=Math.floor(document.getElementById("canvas").offsetWidth),d=new e.default("keyboard"),h=new i.default(y/2,375),f=3,w=new n.default;w.setup(),d.init(),d.pick(3);n=function(e,t,r){e.width=t,e.height=r};n(u,y,500),n(s,y,500);function g(e){var t=l.default.decode(e.data);if("keys"===t.action&&0<t.velocity&&(e=(t.value.value-53)%24,d.pick(e)),"dial"===t.action)switch(t.value.dialColor){case"green":h.setX(t.velocity*y/127),k("left",1620*t.velocity/128);break;case"blue":f=Math.max(t.velocity,1);break;case"yellow":127<=t.velocity&&v(p,u);break;case"red":h.setY(500*t.velocity/127),k("right",1620*t.velocity/128);break;default:return}}var k=function(e,t){e=document.querySelector(".".concat(e," div"));e.style.webkitTransform="rotate("+t+"deg)",e.style.mozTransform="rotate("+t+"deg)",e.style.msTransform="rotate("+t+"deg)",e.style.oTransform="rotate("+t+"deg)",e.style.transform="rotate("+t+"deg)"},v=function(e,t){e.clearRect(0,0,u.width,u.height)},n=function e(){var t,r;v(c,u),a&&h.changed()&&((t=p).beginPath(),t.lineWidth=f,t.lineCap="round",t.strokeStyle=d.current,t.moveTo(h._x,h._y),t.lineTo(h.x,h.y),t.stroke()),c.drawImage(s,0,0),r=f/2+1,(t=c).beginPath(),t.strokeStyle=d.current,t.arc(h.x,h.y,r,0,2*Math.PI),t.stroke(),t.beginPath(),t.strokeStyle="#FFF",t.arc(h.x,h.y,1,0,2*Math.PI),t.stroke(),h.normalize(),window.webkitRequestAnimationFrame(e)};window.webkitRequestAnimationFrame(n);document.querySelector("#start button").addEventListener("click",function(e){document.getElementById("start").classList.add("hide"),a=!0}),document.onkeydown=function(e){"38"==(e=e||window.event).keyCode?h.add(0,-10):"40"==e.keyCode?h.add(0,10):"37"==e.keyCode?h.add(-10,0):"39"==e.keyCode&&h.add(10,0)},document.getElementById("connect").addEventListener("click",function(e){w.setup(),setTimeout(function(){if(0<w.devices.length){for(var e in w.devices)w.selectDevice(e,g);document.getElementById("menu").classList.add("hide")}else document.getElementById("connect-error").innerHTML="Couldn't detect any midi devices (check browser support)"},200)})},{"./brush":1,"./color_picker":2,"./midi":4,opzjs:5}],4:[function(e,t,r){"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var l=0,t=function(){};return{s:t,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,n=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw n}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,l=new Array(t);r<t;r++)l[r]=e[r];return l}function i(e,t){for(var r=0;r<t.length;r++){var l=t[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(){function t(){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),(this.self=this).devices=[],this.supported=this.checkMidiSupport()}var e,r,l;return e=t,(r=[{key:"setup",value:function(){navigator.requestMIDIAccess().then(this.onMIDISuccess.bind(this),this.onMIDIFailure.bind(this))}},{key:"onMIDISuccess",value:function(e){e.inputs.values();var t=n(e.inputs.values());try{for(t.s();!(r=t.n()).done;){var r=r.value;this.devices.push(r)}}catch(e){t.e(e)}finally{t.f()}}},{key:"onMIDIFailure",value:function(){console.log("Could not access your MIDI devices.")}},{key:"checkMidiSupport",value:function(){return navigator.requestMIDIAccess?(console.log("This browser supports WebMIDI!"),!0):(console.log("WebMIDI is not supported in this browser."),!1)}},{key:"selectDevice",value:function(e,t){e=this.devices[e];return e.onmidimessage=t,'Connected to "'.concat(e.name,'"')}}])&&i(e.prototype,r),l&&i(e,l),t}();r.default=l},{}],5:[function(e,t,r){"use strict";function n(){for(var e=s,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];for(var n=0;n<r.length;n++)if(!(e=e[r[n]]))throw"Untracked value";return e}function i(e){return e.length<1?null:n("track",e[0])}function o(e){return e.length<1?null:n("action",e[0])}function a(e){if(e.length<3)return null;switch(o(e)){case"keys":return function(e){if(e.length<2)return null;e=e[1];return{value:e,note:n("notes",e%12)}}(e);case"dial":return function(e){if(e.length<2)return null;var t=e[1];return{dial:(t-1)%4,dialColor:n("dial","color",t%100),page:Math.floor((t-1)/4),pageColor:n("dial","page",i(e),t%100)}}(e);case"pitch bend":return(t=e).length<3?null:{absolute:t[1],relative:t[2]};default:return{}}var t}function u(e){return e.length<3?-1:e[2]}var s=e("./opz.json");t.exports={decode:function(t){try{return 1===t.length?{track:l=n("control",(e=t)[0]),action:l,velocity:u(e),value:{}}:2===t.length?null:{track:i(t),action:o(t),velocity:u(t),value:a(t)}}catch(e){r=t,console.log("[OPZ]: Untracked midi value. Please create an issue https://github.com/nbw/opz/issues"),console.log("[OPZ]: ".concat(r))}var r,e,l},velocity:u}},{"./opz.json":6}],6:[function(e,t,r){t.exports={dictionary:{action:{dial:"dial",keys:"keys",pitch:"pitch bend"},color:{blue:"blue",green:"green",purple:"purple",red:"red",white:"white",yellow:"yellow"},track:{arp:"arp",bass:"bass",chord:"chord",fx1:"fx1",fx2:"fx2",kick:"kick",lead:"lead",lights:"lights",master:"master",module:"module",motion:"motion",perc:"perc",perform:"perform",sample:"sample",snare:"snare",tape:"tape"},clock:"clock",kill:"kill",start:"start",stop:"stop"},control:{248:"clock",250:"start",252:"stop"},action:{128:"keys",129:"keys",130:"keys",131:"keys",132:"keys",133:"keys",134:"keys",135:"keys",136:"keys",137:"keys",138:"keys",139:"keys",140:"keys",141:"keys",142:"keys",143:"keys",144:"keys",145:"keys",146:"keys",147:"keys",148:"keys",149:"keys",150:"keys",151:"keys",152:"keys",153:"keys",154:"keys",155:"keys",156:"keys",157:"keys",158:"keys",159:"keys",176:"dial",177:"dial",178:"dial",179:"dial",180:"dial",181:"dial",182:"dial",183:"dial",184:"dial",185:"dial",186:"dial",187:"dial",188:"dial",189:"dial",190:"dial",191:"dial",224:"pitch bend",225:"pitch bend",226:"pitch bend",227:"pitch bend",228:"pitch bend",229:"pitch bend",230:"pitch bend",231:"pitch bend",232:"pitch bend",233:"pitch bend",234:"pitch bend",235:"pitch bend",236:"pitch bend",237:"pitch bend",238:"pitch bend",239:"pitch bend"},track:{128:"kick",129:"snare",130:"perc",131:"sample",132:"bass",133:"lead",134:"arp",135:"chord",136:"fx1",137:"fx2",138:"tape",139:"master",140:"perform",141:"module",142:"lights",143:"motion",144:"kick",145:"snare",146:"perc",147:"sample",148:"bass",149:"lead",150:"arp",151:"chord",152:"fx1",153:"fx2",154:"tape",155:"master",156:"perform",157:"module",158:"lights",159:"motion",176:"kick",177:"snare",178:"perc",179:"sample",180:"bass",181:"lead",182:"arp",183:"chord",184:"fx1",185:"fx2",186:"tape",187:"master",188:"perform",189:"lights",190:"lights",191:"motion",224:"kick",225:"snare",226:"perc",227:"sample",228:"bass",229:"lead",230:"arp",231:"chord",232:"fx1",233:"fx2",234:"tape",235:"master",236:"perform",237:"module",238:"lights",239:"motion"},notes:{0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},dial:{color:{1:"green",2:"blue",3:"yellow",4:"red",5:"green",6:"blue",7:"yellow",8:"red",9:"green",10:"blue",11:"yellow",12:"red",13:"green",14:"blue",15:"yellow",16:"red",23:"kill"},page:{kick:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},snare:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},perc:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},sample:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},bass:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},lead:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},arp:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"blue",10:"blue",11:"blue",12:"blue",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},chord:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},fx1:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},fx2:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},tape:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},master:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},perform:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},module:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},lights:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"},motion:{1:"white",2:"white",3:"white",4:"white",5:"green",6:"green",7:"green",8:"green",9:"purple",10:"purple",11:"purple",12:"purple",13:"yellow",14:"yellow",15:"yellow",16:"yellow",23:"kill"}}}}},{}]},{},[3]);